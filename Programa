#formato do dicionário atualmente: 
#estoque= {produto: [quantidade, valor]}
#lojas= {unidade: {produto: [quantidade, valor]}

#Menu principal

print('0- sair')
print('1- Acessar Menu de Lojas')
print('2- Acessar Menu de Estoques')
print('3 - Acessar Menu de Relatórios')
menu_inicial= input('Digite o comando inicial: ')

if menu_inicial == 1:
    #Menu de Lojas
    print('0- sair')
    print('1- adicionar loja')
    print('2- alterar loja')
    print('3 - remover loja')
    menu_lojas= input('Digite o comando inicial: ')
    
    if menu_lojas == 0:
        print('Até mais')    
    
    if menu_lojas == 1:
        unidade= input('Digite o nome da unidade: ')
        lojas[unidade]= estoque
        if unidade in lojas:
            print('Unidade já cadastrada')
            
    if menu_lojas == 2:
       deleta= input('Digite o nome da unidade a ser excluída').strip
       deleta= deleta.lower()
       del lojas[deleta]
     
    if menu_lojas == 3:
        pass

if menu_inicial == 2:

    #Menu dos Estoques


if menu_inicial == 3:

    #Menu dos relatórios
    
    print('0- sair')
    print('1- Imprimir Estoque')
    print('2- Lista de Produtos em falta')
    print('3-Valor total em estoque')
    
    menu_relatorios= input('Digite o comando inicial: ')
    
    if menu_relatorios == 0:
        print('Até mais')    
    
    if menu_relatorios == 1: # Imprime o Estoque
        
            
    if menu_relatorios == 2:# gera lista de produtos em falta
    
    if menu_relatorios == 3: #Imprime o valor total em estoque

print('')
print("Controle de estoque")
print('')
print("O que você deseja fazer?")
print("0 - sair")
print('1 - adicionar loja')
print('2 - alterar estoque da loja')
print("3 - adicionar item")
print("4 - remover item")
print("5 - alterar item")
print("6 - alterar preço")
print("7 - imprimir estoque")
print('8- imprimir valor monetário total em estoque')
print('9- Lista de produtos com quantidade de estoque negativa')
menu= int(input('Digite o comando: '))


with open('estoque.json', 'r') as est:
    estoque = json.loads(est.read())
    
while menu != 0:

    if menu not in range(9):
        print('')
        print("Digite um comando válido")
        
    if menu == 1:
        pass
    if menu == 2:
        pass
    if menu == 3:
        produto = input("Nome do produto: ")
        produto = produto.strip(" ")
        produto = produto.lower()
        if produto not in estoque:
            estoque.setdefault(produto, []).append(quant)    
        elif produto in estoque:
            print("Produto já cadastrado.") 
        quant= int(input('Quantidade inicial do produto: '))
        while quant < 0:
            print("A quantidade inicial não pode ser negativa.")
            quant= int(input('Quantidade inicial do produto: '))

        else:
            print('O produto foi registrado no estoque.') 
            
        preco = float(input('Preço do produto: '))

        while preco <= 0:
            print('O preço não pode ser negativo ou nulo')
            preco = float(input('Preço do produto: '))
        estoque.setdefault(produto, []).append(preco)
             
    if menu == 4:
        produto = input('Produto a ser deletado: ')
        produto = produto.strip(" ")
        produto = produto.lower()
        if produto not in estoque:
            print('Produto não encontrado')
            produto = input('Produto a ser deletado: ')
        ctz = input('Voçê tem certeza que quer deletar {0}? '.format(produto))
        ctz = ctz.lower()
        if ctz == 'sim': 
            del estoque[produto]
            print('Produto deletado')

    if menu == 5:
        produto = input('Nome do Produto: ')
        produto = produto.strip(" ")
        produto = produto.lower()
        if produto in estoque:
            quant = int(input('Quantidade: '))
            estoque[produto] = estoque[produto]['quantidade'] +  quant
            print('Novo estoque de {0}: {1}'.format(produto,estoque[produto]))
         else:
            print("Produto não encontrado")
            
    if menu == 6:
        produto = input('Qual produto terá o seu valor alterado? ')
        produto = produto.strip(" ")
        produto = produto.lower()
        preco = input('Qual é o novo preço do produto? ')
        
        estoque[produto]= preco
    
    if menu == 7:
        print('')
        print('Estoque atualizado: ')
        for produto in estoque:
            print('{0}: {1}'.format(produto, estoque[produto]))
            
    if menu == 8: #imprime o valor total disponível em estoque numa determinada loja
        valor_total= 
        pass
        print(valor_total)
        
    if menu == 9:    #imprime produtos com valor de estoque negativo
        estoque_negativo={}
        #percorrer dicionario e observar quais valores são negativos... se valor negativo, guardar valor e key em dicionário 
        for k, v in estoque.items():
            if v < 0:
                estoque_negativo[k]=v
        print('O estoque de produto com valores negativos é:{0}'.format(estoque_negativo))    
            
    print('')
    print("Controle de estoque")
    print("O que você deseja fazer?")
    print("0 - sair")
    print('1 - adicionar unidade')
    print('2 - alterar estoque da unidade')
    print("3 - adicionar item")
    print("4 - remover item")
    print("5 - alterar item")
    print("6 - alterar preço")
    print('7 - imprimir estoque')
    print('8- imprimir valor monetário total em estoque')
    print('9- Lista de produtos com quantidade de estoque negativa')
    menu= int(input('Digite o comando: '))
    
original = json.dumps(estoque, sort_keys = True, indent = 4)
with open('estoque.json','w') as est:
    est.write(original)
print('Até mais')
