import json

print('')
print('Controle de estoque')
print('0 - Sair')
print('1 - Adicionar item')
print('2 - Remover item')
print('3 - Alterar item')
print('4 - Imprimir estoque')
menu = int(input('Faça sua escolha: '))

with open('estoque.json', 'r') as est:
    estoque = json.loads(est)

while menu != 0:
    if menu == 1:
        produto = input('Nome do Produto: ')
        if produto not in estoque:
            estoque[produto] = {}
            quant = int(input('Quantidade: '))
            while quant <= 0:
                print('Quantidade Inicial não pode ser negativa')
                quant = int(input('Quantidade Inicial: '))
            estoque[produto]['quantidade'] = {quant}

        else:
            print('Produto já cadastrado')
        
    if menu == 2:
        produto = input('Produto a ser deletado: ')
        while produto not in estoque:
            print('Produto não encontrado')
            produto = input('Produto a ser deletado: ')
        del estoque[produto]
        print('Produto deletado')

    if menu == 3:
        produto = input('Nome do Produto: ')
        if produto in estoque:
            quant = input('Quantidade: ')
            estoque[produto] = int(estoque[produto]) +  int(quant)
            print('Novo estoque de {0}: {1}'.format(produto,estoque[produto]))
     
    if menu == 4:
        print(estoque)
        for produto in estoque:        
            print("{0}: {1}\n".format(produto, estoque[produto]))
        
                
    print('')
    print('Controle de estoque')
    print('0 - Sair')
    print('1 - Adicionar item')
    print('2 - Remover item')
    print('3 - Alterar item')
    print('4 - Imprimir estoque')
    menu = int(input('Faça sua escolha: '))
original = json.dumps(estoque, sort_keys = False, indent = 4)
with open('estoque.json','w') as est:
    est.write(original)
print('Até mais')
